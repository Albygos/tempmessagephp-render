RewriteEngine On

# -----------------------------------------------------------
# FORCE HTTPS + WWW (NO loop even if host has extra redirects)
# -----------------------------------------------------------
RewriteCond %{HTTPS} off [OR]
RewriteCond %{HTTP_HOST} !^www\.tempmessage\.com$ [NC]
RewriteRule ^(.*)$ https://www.tempmessage.com/$1 [L,R=301]

# -----------------------------------------------------------
# Serve robots, sitemap directly
# -----------------------------------------------------------
RewriteRule ^robots\.txt$ robots.txt [L]
RewriteRule ^sitemap\.php$ sitemap.php [L]
RewriteRule ^sitemap\.xml$ sitemap.xml [L]
RewriteRule ^sitemap_index\.xml$ sitemap_index.xml [L]

# -----------------------------------------------------------
# Stop rewriting real files/folders
# -----------------------------------------------------------
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^ - [L]

RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# -----------------------------------------------------------
# Route everything else to index.php
# -----------------------------------------------------------
RewriteRule ^ index.php [L]
